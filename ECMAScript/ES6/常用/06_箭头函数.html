<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>06_箭头函数</title>
</head>

<body>
  <button id="btn1">测试箭头函数this_1</button>
  <button id="btn2">测试箭头函数this_2</button>


  <!--
* 作用: 定义匿名函数
* 基本语法:
  * 没有参数: () => console.log('xxxx')
  * 一个参数: i => i+2
  * 大于一个参数: (i,j) => i+j
  * 函数体不用大括号: 默认返回结果
  * 函数体如果有多个语句, 需要用{}包围，若有需要返回的内容，需要手动返回
* 使用场景: 多用来定义回调函数

* 箭头函数的特点：
    1、简洁
    2、箭头函数没有自己的this，箭头函数的this不是调用的时候决定的，而是在定义的时候处在的对象就是它的this
    3、扩展理解： 箭头函数的this看外层的是否有函数，
        如果有，外层函数的this就是内部箭头函数的this，
        如果没有，则this是window。
-->
  <script type="text/javascript">
    //function的形式
    // let fun = function () {
    //   console.log('我是箭头函数');
    // };
    // 箭头函数的形式
    let fun = () => console.log('我是箭头函数');
    fun();

    // 形参的语法
    // 1.没有形参，不能省略括号
    let fun1 = () => console.log('我是箭头函数');
    // 2.一个形参，可省略括号
    let fun2 = parm => console.log(parm);
    // 2.多个形参，不可省略括号
    let fun3 = (parm1, parm2) => console.log(parm1 + parm2);

    // 函数体语法
    // 1.只有一条语句会=或表达式时
    //省略{}表示立即执行语句，会返回语句的结果
    let fun4 = (x, y) => x + y;
    console.log(fun4(1,2));//3
    // 不省略{}不会立即执行，如需返回值需手动return
    let fun5 = (x, y) => {x + y};
    console.log(fun5(1,2));//不写return返回undefined，写return返回3 
    // 2.多条语句{}不能省略，和function语法形式一致
    let fun6 = (x, y) => {
      console.log(x,y);
      return x + y;
    };
    fun6(1,2);


    // ***箭头函数的this指向：与function相反***
    
    let btn1 = document.getElementById('btn1');
    let btn2 = document.getElementById('btn2');
    // function的this是调用的时候决定的，不是在定义的时候决定的
    btn1.onclick = function () {
      console.log(this); //btn1调用所以此时的this指向btn1
    }
    // 箭头函数的this不是调用的时候决定的，而是在定义时决定的
    btn2.onclick = () => console.log(this);//在全局下定义函数，所以this是Window

    

  </script>

</body>

</html>